"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["5779"],{39432:function(e,t,a){a.d(t,{Aj:()=>y,Au:()=>v,Fj:()=>d,LC:()=>o,Lb:()=>w,M7:()=>f,OV:()=>c,dj:()=>r,gK:()=>u,i7:()=>s,nf:()=>h,qt:()=>n,rU:()=>_,v1:()=>p,xh:()=>g,yW:()=>m});var l=a(34541);let{t:i}=a(76882).ZP.global,s=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),n=()=>l.e.post("/multi_ip_domain/apply"),d=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),c=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),v=e=>l.e.get("/domains/get_ssl",{params:e}),p=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),g=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),_=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),f=e=>l.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),w=()=>l.e.post("/askai/supplier/status"),h=e=>l.e.post("/domain_blocklist/check",e,{fetchOptions:{loading:"Detecting, please wait...",successMessage:!0}}),y=e=>l.e.get("/domain_blocklist/logs",{params:e})},92314:function(e,t,a){a.d(t,{AB:()=>u,CI:()=>n,Re:()=>r,a3:()=>p,cu:()=>d,de:()=>c,ou:()=>s,uJ:()=>o,v_:()=>v});var l=a(34541);let{t:i}=a(76882).ZP.global,s=e=>l.e.get("/overview",{params:e}),o=e=>l.e.get("/overview/failed",{params:e}),n=()=>l.e.get("/postfix_queue/list"),d=e=>l.e.get("/postfix_queue/queue_info",{params:e}),u=e=>l.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),r=e=>l.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),c=()=>l.e.get("/postfix_queue/get_config"),v=e=>l.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},51169:function(e,t,a){a.d(t,{d:()=>o});var l=a(58786),i=a(49247);let s=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:o,onConfirm:n}=e,d=(0,l.qj)({});return a?[(0,l.aZ)({setup(i,o){let{attrs:n,slots:u}=o;return(0,l.JJ)(s,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...i,...n},u)}}),d]:[(0,l.aZ)({setup(t,a){let{attrs:u,slots:r}=a,c=(0,l.f3)(s),v=(0,l.iH)(!1);return d.open=()=>{var t;v.value=!0,null==(t=e.onChangeState)||t.call(e,v.value)},d.close=()=>{v.value=!1},d.setState=t=>{var a;null==c||c.setState(t),null==(a=e.onChangeState)||a.call(e,v.value)},d.getState=()=>(null==c?void 0:c.state)??{},null==c||c.extendApi(d),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:v.value},t,u,{onCancel:o,onConfirm:n,"onUpdate:show":e=>{v.value=e??!1}}),r)}}),d]}},69209:function(e,t,a){a.r(t),a.d(t,{default:()=>R});var l=a(57869),i=a(58786),s=a(22895),o=a(4020),n=a(68271),d=a(51169),u=a(92314),r=a(17977),c=a(16715),v=a(77227),p=a(8490),m=a(17987),g=a(36760),_=a(49468),f=a(39432),w=a(52495);let h={class:"filter-bar"},y={class:"w-260px"},b={class:"date-filters"},S={class:"w-240px"},U=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t}=(0,w.QT)(),a=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),s=(0,i.iH)([{label:t("common.all.domain"),value:""}]),o=(0,i.iH)("today"),d=e=>{let t=new Date,a=(0,m.E)(t,-30);return(0,g.b)(a).getTime()>e||(0,_.i)(t).getTime()<e},u=e=>{switch(e){case"today":l.value=(0,n.wb)();break;case"yesterday":l.value=(0,n.wb)((0,m.E)(new Date,-1));break;case"last7days":l.value=U()}},U=()=>{let e=new Date,t=(0,_.i)(e);return[(0,g.b)((0,m.E)(e,-6)).getTime(),t.getTime()]},k=e=>{o.value="custom",l.value=[(0,g.b)(e[0]).getTime(),(0,_.i)(e[1]).getTime()]},M=async()=>{let e=await (0,f.LC)();(0,n.kJ)(e)&&(s.value=e.map(e=>({label:e.domain,value:e.domain})),s.value.unshift({label:t("common.all.domain"),value:""}))};return(0,i.bv)(()=>{M()}),(e,t)=>{let n=p.Z,m=v.Z,g=c.Z,_=r.Z;return(0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",y,[(0,i.Wm)(n,{value:a.value,"onUpdate:value":t[0]||(t[0]=e=>a.value=e),options:(0,i.SU)(s)},null,8,["value","options"])]),(0,i._)("div",b,[(0,i.Wm)(g,{value:(0,i.SU)(o),"onUpdate:value":[t[1]||(t[1]=e=>(0,i.dq)(o)?o.value=e:null),u]},{default:(0,i.w5)(()=>[(0,i.Wm)(m,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(m,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(m,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",S,[(0,i.Wm)(_,{value:l.value,type:"daterange","is-date-disabled":d,"onUpdate:value":k},null,8,["value"])])])])}}});var k=a(41748);let M=(0,k.default)(U,[["__scopeId","data-v-1552f451"]]);var Z=a(75762),D=a(28405),O=a(84439),W=a(53475),q=a(60424),x=a(35409);let C=(0,i.aZ)({__name:"SendFailDetails",setup(e){let{t}=(0,w.QT)(),a=(0,i.iH)(!1),l=(0,i.iH)([]),s=(0,i.iH)([{key:"recipient",title:t("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:t("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:t("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:t("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:t("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:t("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:t("overview.sendFailDetails.columns.details"),render:e=>(0,i.Wm)(x.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),o=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),r=async(e,t,i)=>{try{a.value=!0;let s=await (0,u.uJ)({domain:e,start_time:t/1e3,end_time:i/1e3});l.value=(0,n.kJ)(s)?s:[]}finally{a.value=!1}},[c,v]=(0,d.d)({onChangeState:e=>{if(e){let e=v.getState();r(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,n)=>{let d=q.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(c),{title:(0,i.SU)(t)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(d,{loading:(0,i.SU)(a),"max-height":600,data:(0,i.SU)(l),columns:(0,i.SU)(s),"row-props":o},null,8,["loading","data","columns"])]),_:1},8,["title"])}}});var T=a(65965);let H={class:"email-analytics-container"},F={class:"bt-title"},j={class:"metrics-cards"},J={class:"detail-row"},P={class:"rate-charts-card"},Q=(0,i.aZ)({__name:"index",setup(e){let{t}=(0,w.QT)(),a=(0,o.m)(),r=(0,i.iH)(""),c=(0,i.iH)((0,n.wb)()),v=(0,i.iH)([]),p=(0,i.qj)({delivery_rate:{label:t("overview.delivered"),value:0,unit:"%"},open_rate:{label:t("overview.opened"),value:0,unit:"%"},click_rate:{label:t("overview.clicked"),value:0,unit:"%"},bounce_rate:{label:t("overview.bounced"),value:0,unit:"%"}}),m=(0,i.iH)(0),g=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),_=(0,i.iH)({column_type:"hourly",data:[]}),f=(0,i.iH)({column_type:"hourly",data:[]}),h=(0,i.iH)({column_type:"hourly",data:[]}),y=(0,T.tv)(),b=()=>{y.push("/settings/send-queue")},[S,U]=(0,d.d)({component:C}),k=()=>{U.setState({domain:r.value,startTime:c.value[0],endTime:c.value[1]}),U.open()},q=(0,s.DI)(Q,300),x=e=>{Object.entries(e).forEach(e=>{let[t,a]=e;t in p&&(p[t].value=a)}),m.value=e.delayed_queue};async function Q(){let e=await (0,u.ou)({domain:r.value,start_time:Math.floor(c.value[0]/1e3),end_time:Math.floor(c.value[1]/1e3)});(0,n.Kn)(e)&&(x(e.dashboard),v.value=(0,n.kJ)(e.mail_providers)?e.mail_providers:[],g.value=e.send_mail_chart,_.value=e.bounce_rate_chart,f.value=e.click_rate_chart,h.value=e.open_rate_chart)}return(0,i.bv)(()=>{Q()}),(e,s)=>{let o=l.ZP;return(0,i.wg)(),(0,i.iD)("div",H,[(0,i._)("div",F,(0,i.zw)((0,i.SU)(t)("layout.menu.overview")),1),(0,i.Wm)(M,{domain:(0,i.SU)(r),"onUpdate:domain":[s[0]||(s[0]=e=>(0,i.dq)(r)?r.value=e:null),(0,i.SU)(q)],"date-range":(0,i.SU)(c),"onUpdate:dateRange":[s[1]||(s[1]=e=>(0,i.dq)(c)?c.value=e:null),(0,i.SU)(q)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(p),(e,t)=>((0,i.wg)(),(0,i.j4)(Z.Z,{key:t,title:e.label,value:e.value,unit:e.unit},null,8,["title","value","unit"]))),128)),(0,i.Wm)(Z.Z,{class:"cursor-pointer",title:e.$t("overview.delayedQueue"),value:(0,i.SU)(m),"text-color":(0,i.SU)(m)>0?(0,i.SU)(a).warningColor:"",onClick:b},null,8,["title","value","text-color"])]),(0,i._)("div",J,[(0,i.Wm)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(D.Z,{value:(0,i.SU)(v),"onUpdate:value":s[2]||(s[2]=e=>(0,i.dq)(v)?v.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(O.Z,{data:(0,i.SU)(g),onShowFail:k},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",P,[(0,i.Wm)(W.Z,{bounce:(0,i.SU)(_),click:(0,i.SU)(f),open:(0,i.SU)(h)},null,8,["bounce","click","open"])]),(0,i.Wm)((0,i.SU)(S))])}}}),R=(0,k.default)(Q,[["__scopeId","data-v-02e68cd1"]])}}]);